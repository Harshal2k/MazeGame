import{j as x,r as a,C as b,a as W,R as U,b as z}from"./vendor.fd80b4b9.js";const V=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};V();var T="kx59sb0",B="kx59sb1",v;(function(e){e[e.EASY=1]="EASY",e[e.NORMAL=2]="NORMAL",e[e.HARD=3]="HARD"})(v||(v={}));var j="_5khzua0 _14x3hpdu";const u=x.exports.jsx,p=x.exports.jsxs,w=x.exports.Fragment,K=({onClick:e,children:t})=>u("button",{className:j,onClick:e,children:t!=null?t:"Click"});var Y="auiokr0";const Q=({onDifficultyChosen:e,lost:t,win:s,im:r})=>u("div",{className:Y,children:s?u("h1",{style:{color:"#f95d5d",backgroundColor:"#222222",padding:"0.5rem",borderRadius:"0.5rem"},children:r}):u(K,{onClick:()=>{e(v.HARD)},children:t?"Play Again":"Start Game"})}),q=({onGameStart:e,lostText:t,win:s,im:r})=>p(w,{children:[u("h1",{className:B,children:"Maze Game"}),(t==null?void 0:t.length)>0&&u("p",{className:T,style:{color:"#f95d5d",backgroundColor:"#222222",padding:"0.5rem",borderRadius:"0.5rem"},children:t}),u("p",{className:T,children:s?"Congratulations, oh master of the maze! With wit and wisdom, you navigated the labyrinth's twists and turns, conquering every challenge in your path. As a reward for your triumph, we present you with the key to unlock new adventures and mysteries! The world of possibilities awaits at your fingertips.":"The goal of this game is to solve the maze within the given time. Use arrows to move through the labyrinth and find the way out as quickly as possible."}),u(Q,{im:r,win:s,lost:(t==null?void 0:t.length)!=0,onDifficultyChosen:e})]}),Z=e=>{const[t,s]=a.exports.useState(!1),r=a.exports.useRef(e),n=a.exports.useRef([]),o=a.exports.useRef(),l=a.exports.useRef(()=>s(c=>!c)),i=a.exports.useRef(()=>n.current=[]),f=a.exports.useCallback(c=>{c.code===r.current[n.current.length]?(n.current=[...n.current,c.key],o.current&&clearTimeout(o.current),o.current=setTimeout(i.current,2e3)):n.current=[c.key],n.current.length===r.current.length&&(l.current(),i.current())},[]);return S("keypress",f),a.exports.useEffect(()=>{r.current=e,n.current=[]},[e]),t};var m;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.RIGHT=2]="RIGHT",e[e.LEFT=3]="LEFT"})(m||(m={}));const C=({width:e,height:t})=>{const s=J(e,t),r=s[0][0],n=[s[0][0]];r.visitedDuringGenerating=!0;const o=l=>{const i=X(l,s);if(i){i.visitedDuringGenerating=!0,n.push(i),ee([l,i]),o(i);return}n.pop(),n[n.length-1]&&o(n[n.length-1])};return o(r),s},J=(e,t)=>new Array(t).fill(null).map((s,r)=>new Array(e).fill(null).map((n,o)=>({walls:{top:!0,bottom:!0,left:!0,right:!0},coordinates:{x:o,y:r},visitedDuringGenerating:!1}))),X=({coordinates:{x:e,y:t}},s)=>{var n,o,l,i,f,c,h,d;const r=[];return((o=(n=s[t+1])==null?void 0:n[e])==null?void 0:o.visitedDuringGenerating)===!1&&r.push(s[t+1][e]),((i=(l=s[t-1])==null?void 0:l[e])==null?void 0:i.visitedDuringGenerating)===!1&&r.push(s[t-1][e]),((c=(f=s[t])==null?void 0:f[e+1])==null?void 0:c.visitedDuringGenerating)===!1&&r.push(s[t][e+1]),((d=(h=s[t])==null?void 0:h[e-1])==null?void 0:d.visitedDuringGenerating)===!1&&r.push(s[t][e-1]),r[Math.floor(Math.random()*r.length)]},ee=([e,t])=>{switch(te([e,t])){case m.UP:{e.walls.top=t.walls.bottom=!1;break}case m.DOWN:{e.walls.bottom=t.walls.top=!1;break}case m.RIGHT:{e.walls.right=t.walls.left=!1;break}case m.LEFT:{e.walls.left=t.walls.right=!1;break}}},te=([{coordinates:e},{coordinates:t}])=>{const s=e.y!==t.y;return(s?e.y<t.y:e.x<t.x)?s?m.DOWN:m.RIGHT:s?m.UP:m.LEFT},se=e=>{const t=e[0][0],s=e[e.length-1][e.length-1],r=new Map,n=new Map,o={cell:t,estimatedValue:0,distanceFromStart:0,estimatedDistanceToEnd:N(t.coordinates,s.coordinates)};for(E(o,r);r.size;){const l=oe(Array.from(r.values())),i=ne(ce(l.cell,e),l,s.coordinates),f=i.find(c=>ae(c.cell.coordinates,s.coordinates));if(f)return re(f);ie(l.cell.coordinates,r),i.forEach(c=>{const h=G(c.cell.coordinates,r);if(!h||h.estimatedValue>c.estimatedValue){const d=G(c.cell.coordinates,n);(!d||d.estimatedValue>c.estimatedValue)&&E(c,r)}}),E(l,n)}return[]},re=e=>{const t=[];let s=e;for(;s.parent;)s.parent&&(s=s.parent),t.push(s.cell);return t},N=({x:e,y:t},{x:s,y:r})=>Math.abs(e-s)+Math.abs(t-r),ne=(e,t,s)=>e.map(r=>{const n=N(r.coordinates,s);return{cell:r,estimatedValue:t.distanceFromStart+1+n,distanceFromStart:t.distanceFromStart+1,estimatedDistanceToEnd:n,parent:t}}),oe=e=>e.reduce((t,s)=>s.estimatedValue<t.estimatedValue?s:t),ae=({x:e,y:t},{x:s,y:r})=>e===s&&t===r,E=(e,t)=>t.set(`${e.cell.coordinates.y}_${e.cell.coordinates.x}`,e),G=({x:e,y:t},s)=>s.get(`${t}_${e}`),ie=({x:e,y:t},s)=>s.delete(`${t}_${e}`),ce=({coordinates:{x:e,y:t}},s)=>{var n,o,l,i,f,c,h,d;const r=[];return((o=(n=s[t+1])==null?void 0:n[e])==null?void 0:o.walls.top)===!1&&r.push(s[t+1][e]),((i=(l=s[t-1])==null?void 0:l[e])==null?void 0:i.walls.bottom)===!1&&r.push(s[t-1][e]),((c=(f=s[t])==null?void 0:f[e+1])==null?void 0:c.walls.left)===!1&&r.push(s[t][e+1]),((d=(h=s[t])==null?void 0:h[e-1])==null?void 0:d.walls.right)===!1&&r.push(s[t][e-1]),r},R={[v.EASY]:{width:15,height:15},[v.NORMAL]:{width:20,height:20},[v.HARD]:{width:25,height:25}},le=e=>{const[t,s]=a.exports.useState(()=>C(R[e])),r=a.exports.useMemo(()=>se(t),[t]),n=a.exports.useCallback(o=>{s(C(R[o]))},[]);return{maze:t,generateNewMaze:n,solution:r}},ue=e=>{const t=a.exports.useRef(window.matchMedia(e)).current,[s,r]=a.exports.useState(t.matches),n=a.exports.useCallback(({matches:o})=>r(o),[]);return a.exports.useEffect(()=>(t.addEventListener("change",n),()=>t.removeEventListener("change",n)),[n,t]),s},S=(e,t)=>{const s=a.exports.useRef(t);a.exports.useEffect(()=>{s.current=t},[t]),a.exports.useEffect(()=>{const r=n=>s.current(n);return window.addEventListener(e,r),()=>window.removeEventListener(e,r)},[e])};var de="_15u7hnm0 _14x3hpdv";var he="_391hmr0",fe="_391hmr3",me="_391hmr2",ge="_391hmr1";const pe=({cell:e,playerVisiting:t,mazeEnd:s,solution:r,showSolution:n})=>{const o=a.exports.useMemo(()=>r.includes(e),[e,r]),l=a.exports.useMemo(()=>({borderLeft:e.walls.left?void 0:0,borderRight:e.walls.right?void 0:0,borderTop:e.walls.top?void 0:0,borderBottom:e.walls.bottom?void 0:0}),[e]);return u("div",{style:l,"data-testid":`cell_${e.coordinates.y}_${e.coordinates.x}`,className:`${he} ${s?me:""} ${t?fe:""} ${n&&o?ge:""}`},`${e.coordinates.y}${e.coordinates.x}`)};var g;(function(e){e.DOWN="ArrowDown",e.UP="ArrowUp",e.LEFT="ArrowLeft",e.RIGHT="ArrowRight"})(g||(g={}));const ve={[g.DOWN]:"bottom",[g.UP]:"top",[g.LEFT]:"left",[g.RIGHT]:"right"},we={[g.DOWN]:m.DOWN,[g.UP]:m.UP,[g.LEFT]:m.LEFT,[g.RIGHT]:m.RIGHT};g.DOWN+"",g.UP+"",g.LEFT+"",g.RIGHT+"";const ye=({onPlayerMove:e,board:t,playerPosition:s,onGameFinish:r})=>{const[n,o]=a.exports.useState([]);a.exports.useMemo(()=>n.slice(-5),[n]);const l=({key:i})=>{if(i===g.UP||i===g.DOWN||i===g.LEFT||i===g.RIGHT){const f=!t[s.y][s.x].walls[ve[i]];f&&e(we[i]),o(c=>[...c,{key:i,valid:f}])}};return a.exports.useEffect(()=>{s.y===t.length-1&&s.x===t.length-1&&r(n.length)},[t,n,r,s]),S("keydown",l),u(w,{})},xe=["KeyC","KeyH","KeyE","KeyA","KeyT","KeyE","KeyR"],be=({board:e,gameInProgress:t,onGameFinish:s,solution:r})=>{const[n,o]=a.exports.useState({x:0,y:0}),l=Z(xe);a.exports.useEffect(()=>{o({x:0,y:0})},[e]);const i=c=>{switch(c){case m.DOWN:o(({x:h,y:d})=>({x:h,y:d+1}));break;case m.UP:o(({x:h,y:d})=>({x:h,y:d-1}));break;case m.LEFT:o(({x:h,y:d})=>({x:h-1,y:d}));break;case m.RIGHT:o(({x:h,y:d})=>({x:h+1,y:d}));break}},f=a.exports.useCallback(c=>s({moves:c,perfectMoves:r.length}),[s,r]);return p(w,{children:[u("div",{className:de,style:{"--current-board-height":e.length},children:e.map((c,h)=>c.map((d,y)=>u(pe,{showSolution:l,solution:r,cell:d,playerVisiting:n.x===y&&n.y===h,mazeEnd:d.coordinates.x===e.length-1&&d.coordinates.y===e.length-1},`${h}_${y}`)))}),t&&u(ye,{onPlayerMove:i,board:e,playerPosition:n,onGameFinish:f})]})};var Ee="_15v4orr0";const _e=e=>{const t=e.moves/e.perfectMoves;return t<1.1?"Congratulations, you rocking it! \u{1F973}":t<1.3?"Close to awesomeness! \u{1F44A}":"You could definitely do better \u{1F61E}"},Me=({onNewGame:e,result:t})=>{const s=_e(t);return u(w,{children:p("h2",{className:Ee,children:[s," You finished in ",t.moves," moves :)"]})})},$e=({initialDifficulty:e,setWin:t})=>{const{maze:s,generateNewMaze:r,solution:n}=le(e),[o,l]=a.exports.useState(),i=a.exports.useCallback(c=>{t(!0),l(c)},[]),f=a.exports.useCallback(c=>{r(c)},[r]);return a.exports.useEffect(()=>{l(void 0)},[s]),p(w,{children:[u(be,{solution:n,onGameFinish:i,gameInProgress:!o,board:s}),o&&u(Me,{onNewGame:f,result:o})]})};var L="wae2s20",Te="wae2s21";const k="#hg08gos$",Ce=e=>b.AES.encrypt(e,k).toString(),Ne=e=>{try{return b.AES.decrypt(e,k).toString(b.enc.Utf8)}catch(t){return""}};let D=Date.now()+8e4;const Ge=({targetTime:e})=>{const[t,s]=a.exports.useState(!1),[r,n]=a.exports.useState(),[o,l]=a.exports.useState(""),[i,f]=a.exports.useState(!1),c=ue("screen and (min-width: 1024px) and (min-height: 768px)");a.exports.useEffect(()=>{i&&s(!1)},[i]);const h=a.exports.useCallback(_=>{l(""),s(!0),n(_),D=Date.now()+8e4},[]);if(!c)return u("main",{className:L,children:u("h1",{className:Te,children:"This game is suitable for keyboard usage and desktop\u2011sized screens"})});const d=({hours:_,minutes:M,seconds:$,completed:H})=>H?(l("Time's up, but the journey doesn't end here. With each attempt, you grow stronger and wiser."),s(!1),p("h1",{children:["Time Left : ",M,":",$]})):p("h1",{children:["Time Left : ",M,":",$]}),[y,A]=a.exports.useState(""),[F,O]=a.exports.useState("");a.exports.useEffect(()=>{P()},[]);const P=()=>{A(Ce("FLAG008"))},I=()=>{O(Ne(y))};return a.exports.useEffect(()=>{i&&I()},[i]),u("main",{className:L,children:t&&r?p(w,{children:[u(W,{date:D,renderer:d}),u($e,{setWin:f,initialDifficulty:r})]}):u(q,{im:F,win:i,lostText:o,onGameStart:h})})};const Re=Date.now()+8e4;U.render(u(z.StrictMode,{children:u(Ge,{targetTime:Re})}),document.getElementById("root"));
